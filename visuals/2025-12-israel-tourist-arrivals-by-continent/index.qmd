---
title: "How have tourist arrivals in Israel changed since the outbreak of the Gaza War?"
date: "2025-12-31"
categories: [Israel, Tourism, "Gaza War"]
image: plots/thumb.svg
description: "Tourist arrivals by world region (2022-2025)"
format: html
execute:
  dir: project
  echo: false
  output: false
---

```{r project-path}
# Set project path
project_path <- file.path("visuals", "2025-12-israel-tourist-arrivals-by-continent")
```

```{r data-preparation}
library(readxl)
library(dplyr)
library(stringr)
library(tidyr)
library(lubridate)
library(janitor)

# 1) Path to your manually downloaded file
path <- file.path(project_path, "data", "israel_tourist_arrivals.xlsx")

# 2) Read the sheet that contains the data table
# In your file, the data are on the first sheet ("גיליון1") and the real header starts after metadata rows.
raw <- read_excel(path, sheet = "גיליון1", skip = 20)

# 3) Clean column names:
# Keep only the first line (e.g., "Asia,total") and remove extra whitespace
raw_clean <- raw %>%
  rename_with(~ str_squish(str_replace(.x, "\\n.*$", "")))

# 4) Keep only the world-region totals you care about
# (Adjust names here if CBS changes spacing/punctuation in future exports.)
region_cols <- c(
  "Asia",
  "Africa",
  "Europe",
  "NorthAmerica",
  "Central America",
  "South America",
  "Oceania"
)

dat_wide <- raw_clean %>%
  select(
    Period,
    matches(paste(region_cols, collapse = "|")) & !matches("Other\\s*") & !matches("SouthAfrica")
  ) %>% clean_names() %>% 
    rename_with(~ str_remove(.x, "_total_original_data$"))

region_cols_new <- colnames(dat_wide)[-1]

dat_long <- dat_wide %>% 
  # 5) Parse Period like "2023-9" into a proper month date
  separate(period, into = c("year", "month"), sep = "-", remove = FALSE) %>%
  mutate(
    year = as.integer(year),
    month = as.integer(month),
    date = as.Date(sprintf("%04d-%02d-01", year, month))
  ) %>%
  select(date, all_of(region_cols_new)) %>%
  pivot_longer(
    cols = all_of(region_cols_new),
    names_to = "region",
    values_to = "arrivals_thousands"
  ) %>%
  mutate(
    arrivals_thousands = as.numeric(arrivals_thousands),
    region = str_replace_all(region, "\\s+", " ") %>% str_trim()
  )

# 6) Index on September 2023 (Sep 2023 = 100), by region
base_date <- as.Date("2023-09-01")

dat_indexed <- dat_long %>%
  mutate(
    region = case_when(
      region %in% c("south_america", "central_america") ~ "latin_america",
      TRUE ~ region
    )) %>%
  group_by(date, region) %>%
  summarise(
    arrivals_thousands = sum(arrivals_thousands, na.rm = TRUE),
    .groups = "drop"
  ) %>%
    group_by(region) %>% 
    mutate(base_sep2023 = arrivals_thousands[date == base_date][1],
    index_sep2023 = (arrivals_thousands / base_sep2023) * 100)

# dat_indexed is now ready for plotting:
# columns: date, region, arrivals_thousands, base_sep2023, index_sep2023
dat_indexed
```

```{r color-palette}
continent_colors <- c(
  africa          = "#E69F00",
  asia            = "#56B4E9",
  europe          = "#009E73",
  latin_america   = "#CC79A7",
  north_america   = "#0072B2",
  oceania         = "#D55E00"
)

legend_labels <- c(
  africa        = "<b style='color:#E69F00'>Africa</b>",
  asia          = "<b style='color:#56B4E9'>Asia</b>",
  europe        = "<b style='color:#009E73'>Europe</b>",
  latin_america = "<b style='color:#CC79A7'>Latin America</b>",
  north_america = "<b style='color:#0072B2'>North America</b>",
  oceania       = "<b style='color:#D55E00'>Oceania</b>"
)

```


```{r choose-font}
library(showtext)
# Choose default font
font_choice <- "Momo Trust Sans"

# Load Google Fonts into 'sysfonts'
font_add_google(font_choice, db_cache = FALSE)

# Automatically use 'showtext' for new graphics devices
showtext_auto()
```


```{r indexed-chart}
library(ggplot2)
library(scales)
library(ggtext)

p1 <- ggplot(dat_indexed, aes(x = date, y = arrivals_thousands, color = region)) +
          annotate("rect", xmin = as.Date("2023-10-01"), xmax = as.Date("2025-11-01"),
                   ymin = -10, ymax = 210,
                   fill = alpha("#fa8e8e", 0.16)) +
          geom_line(linewidth = 1, na.rm = TRUE) +
          geom_vline(xintercept = base_date + 30, linetype = "dashed", color = "grey40") +
          geom_vline(xintercept = as.Date("2022-03-01"), linetype = "dashed", color = "grey40") +
          scale_y_continuous(
            breaks = c(0, 25, 50, 75, 100, 125, 150, 175, 200),
            labels = label_number(scale = 1, suffix = "k"),
            expand = expansion(mult = c(0.05, 0.1))
          ) +
          scale_x_date(
              date_breaks = "3 months",
              labels = function(x) paste0(format(x, "%b"), "\n", format(x, "'%y")),
              guide  = ggh4x::guide_axis_nested(delim = "\n"),
              expand = expansion(mult = c(0.045, 0.05))
            ) +
          scale_color_manual(values = continent_colors,
                             breaks = names(continent_colors),
                             labels = legend_labels) +
          coord_cartesian(ylim = c(0, 190)) +
          labs(
            title = paste0("Israel’s inbound tourism collapsed sharply after the outbreak",
                           "<br>",
                           "of the <span style='color: #c71e1d;'>Gaza war</span> on October 7th, 2023, and it remains far below", "<br>",
                           "pre-war levels through the end of 2025"),
            subtitle = "Monthly international tourist arrivals to Israel, by region",
            color = "Region",
            caption = paste0("<b>Data source</b>: Israel Central Bureau of Statistics (CBS)", "<br>",
                             "<b>Note</b>: Early 2022 values are suppressed due to COVID-era border restrictions and phased reopening of international travel.", "<br>",
                             "Data reflect administrative border entries as defined by the Israel Central Bureau of Statistics.",
                             "<br>",
                             "<b>Graphic</b>: The Data Decoded / @TheDataDecoded")
          ) +
          theme_minimal(base_family = font_choice, base_size = 14) +
          theme(
            legend.position = c(0.825, 0.825),
            legend.title = element_text(face = "bold", margin = margin(b = 4), size = 14),
            legend.key.height = unit(16, "pt"),
            legend.direction = "vertical",
            legend.text = element_markdown(),
            panel.grid.minor = element_blank(),
            panel.grid.major.y = element_line(linetype = 2),
            panel.grid.major.x = element_blank(),
            axis.title = element_blank(),
            plot.title.position = "plot",
            plot.title = element_markdown(hjust = 0, face = "bold", margin = margin(b = 5),
                                                    lineheight = 1, size = rel(1.6)),
                      plot.subtitle = element_markdown(hjust = 0, margin = margin(t = 3, b = 20),
                                                       size = rel(1), lineheight = 1.2),
                      plot.caption.position = "plot",
                      plot.caption = element_markdown(hjust = 0, vjust = 0, colour = "grey50",
                                                      margin = margin(t = 20), lineheight = 1.25),
                      plot.margin = margin(t = 18.5, r = 14.5, b = 13.6, l = 18.5, unit = "pt")
          ) +
            geom_richtext(data = tibble(x = as.Date("2023-10-15"),
                                        y = 187.5,
                                        label = paste0("Beginning of<br>Gaza war on<br><b>October 7th, 2023</b>")),
                          aes(x = x, y = y, label = label),
                          fill = NA,
                        label.color = NA,
                        hjust = 0,         
                        size = 4,          # Adjust text size for visibility
                        color = "grey20",     # Set text color
                        show.legend = FALSE,
                        family = font_choice,
                        inherit.aes = FALSE) +
            geom_richtext(data = tibble(x = as.Date("2022-03-15"),
                                        y = 187.5,
                                        label = paste0("Effective border<br>reopening after<br><b>COVID-19</b>")),
                          aes(x = x, y = y, label = label),
                          fill = NA,
                        label.color = NA,
                        hjust = 0,         
                        size = 4,          # Adjust text size for visibility
                        color = "grey20",     # Set text color
                        show.legend = FALSE,
                        family = font_choice,
                        inherit.aes = FALSE) +
            geom_richtext(data = tibble(x = as.Date("2024-11-25"),
                                        y = 87.5,
                                        label = paste0("Temporary<br>holiday-driven spike<br>(<b>Easter / Passover</b>)")),
                          aes(x = x, y = y, label = label),
                          fill = NA,
                        label.color = NA,
                        hjust = 1,         # Shift text slightly to the left of the point
                        size = 4,          # Adjust text size for visibility
                        color = "grey20",     # Set text color
                        show.legend = FALSE,
                        family = font_choice,
                        inherit.aes = FALSE) +
            geom_curve(data = tibble(x = as.Date("2022-06-15"), y = 175,
                                     xend = as.Date("2022-03-15"), yend = 162.5),
                aes(x = x, y = y, xend = xend, yend = yend),
              arrow = arrow(length = unit(0.35, "cm"), angle = 23, type = "closed"),
              color = "grey20",
              # size = 0.4,
              angle = 102,
              linewidth = 0.5,
              curvature = -0.35,
              inherit.aes = FALSE
            ) +
            geom_curve(data = tibble(x = as.Date("2024-01-15"), y = 175,
                                     xend = as.Date("2023-10-15"), yend = 162.5),
                aes(x = x, y = y, xend = xend, yend = yend),
              arrow = arrow(length = unit(0.35, "cm"), angle = 23, type = "closed"),
              color = "grey20",
              # size = 0.4,
              angle = 102,
              linewidth = 0.5,
              curvature = -0.35,
              inherit.aes = FALSE
            ) +
            geom_curve(data = tibble(x = as.Date("2024-12-01"), y = 87.5,
                                     xend = as.Date("2025-03-25"), yend = 87.5),
                aes(x = x, y = y, xend = xend, yend = yend),
              arrow = arrow(length = unit(0.35, "cm"), angle = 23, type = "closed"),
              color = "grey20",
              # size = 0.4,
              angle = 102,
              linewidth = 0.5,
              curvature = -0.35,
              inherit.aes = FALSE
            )

```

```{r}

average_last_month <- dat_indexed %>% filter(date == as.Date("2025-11-01")) %>% pull(index_sep2023) %>% mean()

p2 <- ggplot(dat_indexed, aes(x = date, y = index_sep2023, color = region)) +
          annotate("rect", xmin = as.Date("2023-10-01"), xmax = as.Date("2025-11-01"),
                   ymin = -10, ymax = 200, fill = alpha("#fa8e8e", 0.16)) +
          annotate("rect", xmin = as.Date("2025-10-15"), xmax = as.Date("2025-11-15"),
                   ymin = 18, ymax = 50, fill = NA, color = "grey20", linewidth = 0.5) +
          geom_line(linewidth = 1, na.rm = TRUE) +
          geom_vline(xintercept = base_date + 30, linetype = "dashed", color = "grey40") +
          geom_vline(xintercept = as.Date("2022-03-01"), linetype = "dashed", color = "grey40") +
          geom_hline(yintercept = 100, linetype = "solid", color = "grey40") +
          scale_y_continuous(
            breaks = c(0, 25, 50, 75, 100, 125, 150, 175),
            labels = scales::number_format(accuracy = 1),
            expand = expansion(mult = c(0.05, 0.1))
          ) +
          scale_x_date(
              date_breaks = "3 months",
              labels = function(x) paste0(format(x, "%b"), "\n", format(x, "'%y")),
              guide  = ggh4x::guide_axis_nested(delim = "\n"),
              expand = expansion(mult = c(0.045, 0.04))
            ) +
          scale_color_manual(values = continent_colors,
                             breaks = names(continent_colors),
                             labels = legend_labels) +
          coord_cartesian(ylim = c(0, 166)) +
          labs(
            title = paste0("Tourist arrivals to Israel fell to ~25% of September 2023",
            "<br>", "levels across regions in October, with no region recovering", "<br>",
            "to even half of pre-war levels by the end of 2025"),
            subtitle = "Tourist arrivals by region, indexed to September 2023 = 100",
            color = "Region",
            caption = paste0("<b>Data source</b>: Israel Central Bureau of Statistics (CBS)", "<br>",
                             "<b>Note</b>: Early 2022 values are suppressed due to COVID-era border restrictions and phased reopening of international travel.", "<br>",
                             "Data reflect administrative border entries as defined by the Israel Central Bureau of Statistics.",
                             "<br>",
                             "<b>Graphic</b>: The Data Decoded / @TheDataDecoded")
          ) +
          theme_minimal(base_family = font_choice, base_size = 14) +
          theme(
            legend.position = c(0.825, 0.825),
            legend.title = element_text(face = "bold", margin = margin(b = 4)),
            legend.key.height = unit(16, "pt"),
            legend.direction = "vertical",
            legend.text = element_markdown(),
            panel.grid.minor = element_blank(),
            panel.grid.major.y = element_line(linetype = 2),
            panel.grid.major.x = element_blank(),
            axis.title = element_blank(),
            plot.title.position = "plot",
            plot.title = element_markdown(hjust = 0, face = "bold", margin = margin(b = 5),
                                                    lineheight = 1, size = rel(1.6)),
            plot.subtitle = element_markdown(hjust = 0, margin = margin(t = 3, b = 20),
                                                       size = rel(1), lineheight = 1.2),
            plot.caption.position = "plot",
            plot.caption = element_markdown(hjust = 0, vjust = 0, colour = "grey50",
                                                      margin = margin(t = 20), lineheight = 1.25),
            plot.margin = margin(t = 18.5, r = 14.5, b = 13.6, l = 18.5, unit = "pt")
          ) +
            geom_richtext(data = tibble(x = as.Date("2023-10-15"),
                                        y = 162.5,
                                        label = paste0("Beginning of<br>Gaza war on<br><b>October 7th, 2023</b>")),
                        aes(x = x, y = y, label = label),
                        fill = NA,
                        label.color = NA,
                        hjust = 0,         # Shift text slightly to the left of the point
                        size = 4,          # Adjust text size for visibility
                        color = "grey20",     # Set text color
                        show.legend = FALSE,
                        family = font_choice,
                        inherit.aes = FALSE) +
            geom_richtext(data = tibble(x = as.Date("2022-03-15"),
                                        y = 162.5,
                                        label = paste0("Effective border<br>reopening after<br><b>COVID-19</b>")),
                          aes(x = x, y = y, label = label),
                          fill = NA,
                        label.color = NA,
                        hjust = 0,         # Shift text slightly to the left of the point
                        size = 4,          # Adjust text size for visibility
                        color = "grey20",     # Set text color
                        show.legend = FALSE,
                        family = font_choice,
                        inherit.aes = FALSE) +
            geom_richtext(data = tibble(x = as.Date("2023-09-01"),
                                        y = 10,
                                        label = paste0("Drop to <b>~25%</b> of<br>September value")),
                          aes(x = x, y = y, label = label),
                          fill = NA,
                        label.color = NA,
                        hjust = 1,         
                        size = 4,          # Adjust text size for visibility
                        color = "grey20",     # Set text color
                        show.legend = FALSE,
                        family = font_choice,
                        inherit.aes = FALSE) +
            geom_richtext(data = tibble(x = as.Date("2025-09-01"),
                                        y = 87.5,
                                        label = paste0("Below half of<br>pre-war level")),
                          aes(x = x, y = y, label = label),
                          fill = NA,
                        label.color = NA,
                        hjust = 1,         
                        size = 4,          # Adjust text size for visibility
                        color = "grey20",     # Set text color
                        show.legend = FALSE,
                        family = font_choice,
                        inherit.aes = FALSE) +
            geom_curve(data = tibble(x = as.Date("2022-06-15"), y = 150,
                                     xend = as.Date("2022-03-15"), yend = 137.5),
                aes(x = x, y = y, xend = xend, yend = yend),
              arrow = arrow(length = unit(0.35, "cm"), angle = 23, type = "closed"),
              color = "grey20",
              # size = 0.4,
              angle = 102,
              linewidth = 0.5,
              curvature = -0.35,
              inherit.aes = FALSE
            ) +
            geom_curve(data = tibble(x = as.Date("2024-01-15"), y = 150,
                                     xend = as.Date("2023-10-15"), yend = 137.5),
                aes(x = x, y = y, xend = xend, yend = yend),
              arrow = arrow(length = unit(0.35, "cm"), angle = 23, type = "closed"),
              color = "grey20",
              # size = 0.4,
              angle = 102,
              linewidth = 0.5,
              curvature = -0.35,
              inherit.aes = FALSE
            ) +
            geom_curve(data = tibble(x = as.Date("2023-05-01"), y = 19,
                                     xend = as.Date("2023-08-25"), yend = 25),
                aes(x = x, y = y, xend = xend, yend = yend),
              arrow = arrow(length = unit(0.35, "cm"), angle = 23, type = "closed"),
              color = "grey20",
              # size = 0.4,
              angle = 102,
              linewidth = 0.5,
              curvature = -0.35,
              inherit.aes = FALSE
            ) +
            geom_point(
              data = tibble(
                date = as.Date("2023-10-01"),
                index_sep2023 = 25
              ),
              aes(x = date, y = index_sep2023),
              inherit.aes = FALSE,
              shape = 1,        # hollow circle
              size = 7.5,
              stroke = 1,
              color = "grey30"
            ) +
            geom_curve(data = tibble(x = as.Date("2025-09-01"), y = 82,
                                     xend = as.Date("2025-11-01"), yend = 52),
                aes(x = x, y = y, xend = xend, yend = yend),
              arrow = arrow(length = unit(0.35, "cm"), angle = 23, type = "closed"),
              color = "grey20",
              # size = 0.4,
              angle = 102,
              linewidth = 0.5,
              curvature = -0.35,
              inherit.aes = FALSE
            )

```


```{r export-visualization-p1}
svg_path <- file.path(project_path, "plots", "thumb.svg")

svg_w <- 9.8
svg_h <- 9.7

png_w <- 2000
png_h <- round(png_w * svg_h / svg_w)  # keep same aspect ratio

ggsave(svg_path, p1, width = svg_w, height = svg_h)

library(rsvg)

png_path <- file.path(project_path, "plots", "israel-tourist-arrivals-by-continent.png")

rsvg_png(
  svg  = svg_path,
  file = png_path,
  width  = png_w,
  height = png_h
)

```

![](plots/thumb.svg){width=100%}

```{r export-visualization-p2}
svg_path <- file.path(project_path, "plots", "israel-tourist-arrivals-by-continent-indexed.svg")

svg_w <- 9.8
svg_h <- 9.7

png_w <- 2000
png_h <- round(png_w * svg_h / svg_w)  # keep same aspect ratio

ggsave(svg_path, p2, width = svg_w, height = svg_h)

library(rsvg)

png_path <- file.path(project_path, "plots", "israel-tourist-arrivals-by-continent-indexed.png")

rsvg_png(
  svg  = svg_path,
  file = png_path,
  width  = png_w,
  height = png_h
)
```

![](plots/israel-tourist-arrivals-by-continent-indexed.svg){width=100%}